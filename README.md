# Лабораторная работа №5

## Описание

В данной лабораторной работе выполнены пять заданий, направленных на изучение функций в C++ и создания статических и динамических библиотек. Каждое задание включает в себя описание задачи, описания того, как использовать программу и реализованный код.

# Задания:

## Задание 1:
**Описание:**
В этом задание нужно было создать **статическую** библиотеку **.lib** для Windows.
Данная программа предназначена для вычисления значений элементов одномерного динамического массива (вектора) Z по формуле:

[ z_k = x_k + m * y_k ]

где:
- ( x_k ) и ( y_k ) — компоненты одномерных динамических массивов X и Y соответственно.
- ( m ) — величина, вычисляемая по следующей формуле в зависимости от значения ( k ):


m = {

    k, если |sink| <= 0.2;
    sqrt(k), если 0.2 <= |sink| < 0.9;   где k = 0, 1, ..n.
    sqrt(sqrt(k)), если |sink| >= 0.9.
}
---
### Установка

1. Скомпилируйте статическую библиотеку .lib для Windows с использованием компилятора C/C++ (например, Microsoft Visual Studio).
2. Скопируйте скомпилированную библиотеку в директорию проекта.
---
### Использование

1. Запустите программу.
2. Введите размерность массивов ( n ).
3. Введите элементы массивов X и Y по одному.
4. Программа выведет значения элементов массивов X, Y и Z на экран.
---
### Архитектура кода
Программа состоит из 3 проектов:
- GTestTask1
  - pch.cpp
  - pch.h
  - test.cpp

- StaticLib
  - contextMenu.cpp
  - task_1.cpp
  - Header.h
  - menu.h

- task_1
  - main.cpp
  - StaticLib.lib
---
### Проблемы и решения:
### Проблема:
В этом задание я столкнулся с проблемой написания `Google Test`. Я не мог правильно сканектить их с основными функциями.
### Решение:
Сканектил я их по итогу таким способом:

В проекте `GTestTask1`:

   -  В файле `pch.cpp` -  я прописал пусть для `.cpp` файлов из `task_1`
   -  В файле `pch.h` -  я прописал пусть для `.h` файлов из `task_1`
  
И все хорошо законектилось.

---
### Реализация функций: 
## **task_1, StaticLib, GTestTask1**

  **1. `double getDouble`**

- Запрашивает ввод числа типа double в диапазоне [begin, end].

 #### Параметры:

- begin (long double): Начало диапазона.
- end (long double): Конец диапазона.

#### Возвращаемое значение:

- double: Введенное значение в пределах диапазона.

**2. `void printInfo`**
  - Выводит информацию о выборе в контекстном меню.
  

**3. `void getArr(double* arr, int n, int choice)`**

- Запрашивает ввод элементов массива.

#### Параметры:
- arr: Указатель на массив, в который будут сохранены введенные значения.
- n: Размер массива.
- choice: Выбор массива (1 для массива X, 0 для массива Y).

**4. `void outArr(double* arr, int n)`**

- Выводит элементы массива на экран.

#### Параметры:
- arr: Указатель на массив, элементы которого нужно вывести.
- n: Размер массива.

**5. `double mValue(int k)`**

- Вычисляет значение m в зависимости от значения функции синуса.

#### Параметры:
- k: Индекс элемента, используемый для вычисления.

#### Возвращаемое значение:
- Возвращает вычисленное значение m.

**6. `void feelArrZ(double* arrZ, double* arrX, double* arrY, int n)`**

- Заполняет массив Z на основе массивов X и Y с использованием функции mValue.

#### Параметры:
- arrZ: Указатель на массив Z, который будет заполнен.
- arrX: Указатель на массив X.
- arrY: Указатель на массив Y.
- n: Размер массивов.

**7. `void startProgram()`**

- Основная функция программы. Запрашивает размер массива, вводит элементы массивов X и Y, вычисляет массив Z и выводит все массивы на экран.

**7. `int main()`**

- Основная функция программы, которая управляет пользовательским интерфейсом и выбором действий.

#### Описание:
- Устанавливает локализацию для вывода на русском языке.
- В цикле запрашивает у пользователя выбор действия.
- В зависимости от выбора выполняет одну из следующих функций:
  - **startProgram()**: Запускает основную логику программы.
  - **getInfo()**: Выводит дополнительную информацию (например, о проекте или его использовании).
- Если пользователь не выбрал выход (выбор 3), программа ожидает нажатия клавиши Enter для продолжения.

#### Возвращаемое значение:
- Возвращает 0, что указывает на успешное завершение программы.

**8. `int check(double* arr1, double* arr2, int n)`**

- Функция для сравнения двух массивов.

#### Описание:
- Принимает два указателя на массивы arr1 и arr2, а также размер массива n.
- Сравнивает элементы обоих массивов по индексам.
- Если все элементы совпадают, возвращает 1; если хотя бы один элемент отличается, возвращает 0.

---

**9. `double feelM(int k)`**

- Функция для вычисления значения в зависимости от синуса числа.

#### Описание:
- Принимает целое число k.
- Вычисляет значение функции синуса для k и возвращает:
  - k, если абсолютное значение синуса меньше или равно 0.2.
  - Квадратный корень из k, если абсолютное значение синуса находится в диапазоне от 0.2 до 0.9.
  - Четвертый корень из k, если абсолютное значение синуса больше или равно 0.9.

---

**10. `void makeArr(double* arr, double* arrX, double* arrY, int n)`**

- Функция для заполнения массива на основе двух входных массивов.

#### Описание:
- Принимает указатели на массивы arr, arrX, arrY и размер массива n.
- Для каждого элемента от 0 до n:
  - Вызывает функцию feelM(k) для получения значения m.
  - Заполняет массив arr по формуле: arr[k] = arrX[k] + m * arrY[k].

---

### Тесты

#### TEST(Task1, Test1)

Проверяет корректность работы функции с большими отрицательными числами.

#### TEST(Task1, Test2)

Проверяет корректность работы функции с очень маленькими отрицательными числами.

#### TEST(Task1, Test3)

Проверяет корректность работы функции с обычными положительными и отрицательными числами.

#### TEST(Task1, Test4)

Проверяет корректность работы функции с большими положительными числами.

#### TEST(Task1, Test5)

Проверяет корректность работы функции с очень маленькими положительными числами.

---

#### Описание тестов:
Каждый тест создает два массива arrX и arrY, затем вызывает функцию makeArr() для заполнения массива arrZ1 и функцию feelArrZ() (которая не была описана, но предполагается, что она выполняет аналогичную задачу). После этого результаты сравниваются с помощью функции check(). Если массивы совпадают, тест проходит успешно. В конце каждого теста освобождаются выделенные массивы.

## Задание 2:
**Описание:**
В этом задание нужно было создать **динамическую** библиотеку **.dll** для Windows.
Данная программа предназначена для того, чтобы найти максимальный элемент массива.

---
### Установка

1. Скомпилируйте статическую библиотеку .lib для Windows с использованием компилятора C/C++ (например, Microsoft Visual Studio).
2. Скопируйте скомпилированную библиотеку в директорию проекта.

### Использование

1. Запустите программу.
2. Введите размерность массивов ( n ).
3. Введите элементы массива по одному.
4. Программа выведет максимальное значение этого массива.

### Архитектура кода
Программа состоит из 3 проектов:
- GTestTask2
  - pch.cpp
  - pch.h
  - test.cpp

- DLL2
  - dll2Main.cpp
  - dll2HEADER.h

- task_2
  - main.cpp
  - StaticLib.lib


### Реализация функций: 
## **task_2, DLL2, GTestTask2**

  **1. `double getDouble`**

- Запрашивает ввод числа типа double в диапазоне [begin, end].

 #### Параметры:

- begin (long double): Начало диапазона.
- end (long double): Конец диапазона.

#### Возвращаемое значение:

- double: Введенное значение в пределах диапазона.

**2. `void printInfo`**
  - Выводит информацию о выборе в контекстном меню.
  

**3. `void getArr(double* arr, int n)`**

- Запрашивает ввод элементов массива.

#### Параметры:
- arr: Указатель на массив, в который будут сохранены введенные значения.
- n: Размер массива.

**4. `void outArr(double* arr, int n)`**

- Выводит элементы массива на экран.

#### Параметры:
- arr: Указатель на массив, элементы которого нужно вывести.
- n: Размер массива.

**5. `void startProgram()`**

- Функция для запуска основной программы, которая загружает динамическую библиотеку и находит максимальный элемент в массиве.

#### Описание:
- Загружает динамическую библиотеку DLL2.dll.
- Определяет тип функции findMax, которая будет использоваться для поиска максимального элемента в массиве.
- Запрашивает у пользователя размер массива, затем выделяет память для него.
- Вызывает функцию getArr(arr, n) для заполнения массива значениями.
- Вызывает функцию findMax(arr, 0, n) для нахождения максимального элемента в массиве и выводит результат.
- Освобождает выделенную память и освобождает библиотеку.



**6.`int main()`**

- Главная функция программы.

#### Описание:
- Устанавливает локализацию на русский язык.
- В цикле предлагает пользователю выбрать действие:
  - Запуск функции startProgram().
  - Вывод информации с помощью функции getInfo().
- После выполнения выбранного действия программа ожидает нажатия Enter для продолжения.
- Цикл продолжается до тех пор, пока пользователь не выберет выход (выбор 3).
- В конце программа приостанавливается до нажатия клавиши.



**7. `extern "C" __declspec(dllexport) double findMax(double *arr, int start, int end)`**

 - Функция для нахождения максимального элемента в массиве с использованием рекурсивного подхода.

#### Описание:
- Принимает указатели на массив arr и индексы start и end, определяющие диапазон поиска.
- Если диапазон содержит один элемент, возвращает этот элемент.
- Если диапазон содержит два элемента, возвращает максимальный из них.
- Делит массив на три части и рекурсивно вызывает себя для нахождения максимума в каждой части.
- Возвращает максимальное значение из двух найденных максимумов.



### Тесты

#### TEST(Task2, Test1)

Проверяет корректность работы функции с большими положительными числами.

#### TEST(Task2, Test2)

Проверяет корректность работы функции с очень маленькими положительными числами.

#### TEST(Task2, Test3)

Проверяет корректность работы функции с обычными положительными и отрицательными числами.

#### TEST(Task2, Test4)

Проверяет корректность работы функции с большими отрицательными числами.

#### TEST(Task2, Test5)

Проверяет корректность работы функции с очень маленькими отрицательными числами.



#### Описание тестов:
Каждый тест загружает динамическую библиотеку DLL2.dll, получает адрес функции findMax, создает массив с тестовыми данными, вызывает функцию для нахождения максимального значения и сравнивает полученный результат с ожидаемым значением с помощью EXPECT_EQ(). В конце каждого теста освобождаются выделенные массивы.



## Задание 3:
**Описание:**
Данная программа создает массив из элементов, расположенных на главной диагонали матрицы и имеющих четное значение. Вычисляет произведение элементов этого массива. Созданный массив и результат произведения выводит на экран.



### Использование

1. Запустите программу.
2. Введите размерность двумерного массива .
3. Введите элементы массива по одному.
4. Программа выведет новый массив и его произведение.

### Архитектура кода
Программа состоит из 3 проектов:
- GTestTask_3
  - pch.cpp
  - pch.h
  - test.cpp

- task_3
  - main.cpp
  - contextMenu.cpp
  - task_3.cpp
  - Header.h
  - menu.h



### Реализация функций: 
## **task_3, GTestTask_3**

  **1. `double getDouble`**

- Запрашивает ввод числа типа double в диапазоне [begin, end].

 #### Параметры:

- begin (long double): Начало диапазона.
- end (long double): Конец диапазона.

#### Возвращаемое значение:

- double: Введенное значение в пределах диапазона.

**2. `void printInfo`**
  - Выводит информацию о выборе в контекстном меню.
  

**3. `void getArr(double* arr, int rows, int cols)`**

- Запрашивает ввод элементов массива.

#### Параметры:
- arr: Указатель на массив, в который будут сохранены введенные значения.
- rows: Количество строк.
- cols: Количество столбцов.

**4. `void outArr(double* arr, int rows, int cols)`**

- Выводит элементы массива на экран.

#### Параметры:
- arr: Указатель на массив, элементы которого нужно вывести.
- rows: Количество строк.
- cols: Количество столбцов.

**5. `void startProgram()`**

 - Главная функция программы для взаимодействия с пользователем.

##### Описание:
- Устанавливает русскую локализацию.
- Запрашивает у пользователя размер матрицы (количество строк и столбцов).
- Выделяет память для двумерного массива и заполняет его с помощью функции getArr().
- Выводит первоначальный массив с помощью out2Arr().
- Подсчитывает количество четных чисел на главной диагонали с помощью countEvenNumber().
- Создает новый массив из четных чисел с помощью newEvenArr() и выводит его с помощью outArr().
- Вычисляет произведение четных чисел с помощью productEvenArr() и выводит результат.
- Освобождает выделенную память для массивов перед завершением программы.
- Приостанавливает выполнение программы до нажатия клавиши.



### Тесты

#### TEST(Task2, Test1)

Проверяет корректность работы функции с большими положительными числами.

#### TEST(Task2, Test2)

Проверяет корректность работы функции с очень маленькими положительными числами.

#### TEST(Task2, Test3)

Проверяет корректность работы функции с обычными положительными и отрицательными числами.

#### TEST(Task2, Test4)

Проверяет корректность работы функции с большими отрицательными числами.

#### TEST(Task2, Test5)

Проверяет корректность работы функции с очень маленькими отрицательными числами.


## Задание 4:
**Описание:**
Данная программа определяет встречаются ли в двумерном массиве элементы с нулевым значением.Выводит их индексы и общее количество.Выводит элементы этого массива в обратном порядке.


### Использование

1. Запустите программу.
2. Введите размерность двумерного массива .
3. Введите элементы массива по одному.
4. Программа выведет индексы, общее количество и новый массив.
   

### Архитектура кода
Программа состоит из 3 проектов:
- GTestTask_4
  - pch.cpp
  - pch.h
  - test.cpp

- task_4
  - main.cpp
  - contextMenu.cpp
  - task4.cpp
  - Header.h
  - menu.h


### Реализация функций: 
## **task_4, GTestTask_4**

  **1. `double getDouble`**

- Запрашивает ввод числа типа double в диапазоне [begin, end].

 #### Параметры:

- begin (long double): Начало диапазона.
- end (long double): Конец диапазона.

#### Возвращаемое значение:

- double: Введенное значение в пределах диапазона.

**2. `void printInfo`**
  - Выводит информацию о выборе в контекстном меню.
  

**3. `void getArr(double* arr, int rows, int cols)`**

- Запрашивает ввод элементов массива.

#### Параметры:
- arr: Указатель на массив, в который будут сохранены введенные значения.
- rows: Количество строк.
- cols: Количество столбцов.

**4. `void outArr(double* arr, int rows, int cols)`**

- Выводит элементы массива на экран.

#### Параметры:
- arr: Указатель на массив, элементы которого нужно вывести.
- rows: Количество строк.
- cols: Количество столбцов.

**5. `int searchNULL(double** arr, int rows, int cols)`**

- Эта функция ищет нулевые элементы в двумерном массиве. Она принимает указатель на массив, количество строк и столбцов. Функция возвращает общее количество найденных нулей и выводит индексы каждого нулевого элемента в формате: "строка - i, столбец - j".

### Параметры:
- arr: Указатель на двумерный массив типа double.
- rows: Количество строк в массиве.
- cols: Количество столбцов в массиве.

### Возвращаемое значение:
- Общее количество нулевых элементов в массиве.



**6. `void reserve(double** arr, int rows, int cols)`**

- Эта функция разворачивает двумерный массив. Сначала она меняет местами строки массива, а затем разворачивает каждую строку. Это приводит к изменению порядка элементов в массиве на противоположный.

### Параметры:
- arr: Указатель на двумерный массив типа double.
- rows: Количество строк в массиве.
- cols: Количество столбцов в массиве.



**7. `void startProgram()`**

-Эта функция является основной точкой входа в программу. Она запрашивает у пользователя количество строк и столбцов для создания двумерного массива, инициализирует массив, заполняет его значениями, выводит начальный массив, подсчитывает и отображает количество нулевых элементов, разворачивает массив и выводит его на экран.

### TEST(Task4, Test1)
Проверяет массив 3x3 с шестью нулями.  
**Ожидаемый результат:** 6.

### TEST(Task4, Test2)
Проверяет массив 3x3, где все элементы равны нулю.  
**Ожидаемый результат:** 9.

### TEST(Task4, Test3)
Проверяет массив 3x3 без нулей.  
**Ожидаемый результат:** 0.

## Тест для функции reserve

### TEST(Task4, Test4)
Проверяет функцию reserve, разворачивающую второй массив. Сравнивает исходный и развернутый массивы.  
**Ожидаемый результат:** Массивы идентичны.

### TEST(Task4, Test5)
Проверяет массив 3x3 без нулей.  
**Ожидаемый результат:** 0.



Все тесты используют динамическое выделение памяти и написаны с использованием Google Test.


## Задание 4:
**Описание:**
Данная программа создает массив из элементов, расположенных в четных столбцах данного массива и имеющих нечетное значение. Выводит среднее значение этого элементов.


### Использование

1. Запустите программу.
2. Введите размерность двумерного массива .
3. Введите элементы массива по одному.
4. Программа выведет среднее значение созданного массива.

### Архитектура кода
Программа состоит из 3 проектов:
- GTestTask_5
  - pch.cpp
  - pch.h
  - test.cpp

- task_5
  - main.cpp
  - contextMenu.cpp
  - task5.cpp
  - Header.h
  - menu.h

### Реализация функций: 

## **task_5, GTestTask_5**

  **1. `double getDouble`**

- Запрашивает ввод числа типа double в диапазоне [begin, end].

 #### Параметры:

- begin (long double): Начало диапазона.
- end (long double): Конец диапазона.

#### Возвращаемое значение:

- double: Введенное значение в пределах диапазона.

**2. `void printInfo`**
  - Выводит информацию о выборе в контекстном меню.
  

**3. `void getArr(double* arr, int rows, int cols)`**

- Запрашивает ввод элементов массива.

#### Параметры:
- arr: Указатель на массив, в который будут сохранены введенные значения.
- rows: Количество строк.
- cols: Количество столбцов.

**4. `void outArr(double* arr, int rows, int cols)`**

- Выводит элементы массива на экран.

#### Параметры:
- arr: Указатель на массив, элементы которого нужно вывести.
- rows: Количество строк.
- cols: Количество столбцов.

**5. `int searchOddNumbers(int long long** arr, int rows, int cols)`**

### Описание
Эта функция принимает двумерный массив arr размером rows на cols и подсчитывает количество нечетных чисел, находящихся в четных столбцах (индексы 1, 3, 5 и т.д.).

### Параметры
- arr: Двумерный массив целых чисел типа long long.
- rows: Количество строк в массиве.
- cols: Количество столбцов в массиве.

### Возвращаемое значение
Возвращает количество нечетных чисел, найденных в четных столбцах.



**6. `void feelOddArr(long long int** arr, long long int* oddArr, int rows, int cols)`**

### Описание
Эта функция заполняет одномерный массив oddArr нечетными числами из четных столбцов исходного двумерного массива arr.

### Параметры
- arr: Двумерный массив целых чисел типа long long.
- oddArr: Одномерный массив для хранения найденных нечетных чисел.
- rows: Количество строк в массиве.
- cols: Количество столбцов в массиве.



**7. `double mid(int long long* arr, int rows)`**

### Описание
Эта функция вычисляет среднее арифметическое элементов одномерного массива arr.

### Параметры
- arr: Одномерный массив целых чисел типа long long.
- rows: Количество элементов в массиве.

### Возвращаемое значение
Возвращает среднее арифметическое элементов массива.



**8. `void startProgram()`**

### Описание
Эта функция запускает основную программу, запрашивая у пользователя размеры двумерного массива, заполняя его значениями, а затем выполняя анализ для поиска нечетных чисел в четных столбцах. Также вычисляет среднее арифметическое найденных значений.

### TEST(Task5, Test1)
Проверяет массив 3x3 с большими числами.  

### TEST(Task5, Test2)
Проверяет массив 3x3, с большими числами.  


### TEST(Task5, Test3)
Проверяет массив 3x3 с обычными значениями.  


### TEST(Task5, Test4)
Проверяет массив 3x3 с отрицательными большими значениями. 

### TEST(Task5, Test5)
Проверяет массив 3x3 с отрицательными большими значениями.  

---

Все тесты используют динамическое выделение памяти и написаны с использованием Google Test.